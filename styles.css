:root{
  --popup-w: 430px;
  --popup-h: 600px;
  --bn-h: 64px;

  --bg: #eaf6f1;
  --mint: #7fc8b5;
  --mint-dark:#61b39d;
  --text: #1b2b2a;
  --muted:#6c7b78;
  --card:#ffffff;
  --shadow: 0 6px 18px rgba(0,0,0,.08);
  --border: 1px solid rgba(0,0,0,.06);

  --usdt:#2ecc71;
  --usdc:#1e90ff;
  --usde:#f1c40f;

  --page-gutter: 16px;
  --chart-height: 130px;
  --dots-left-pad: 40px;   /* место слева в карточке под точки */
  --dots-gap: 8px;
}

html, body{
  width: var(--popup-w);
  height: var(--popup-h);
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: transparent;
  color: var(--text);
  font: 13.5px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
}
*{ box-sizing: border-box; }
button{ cursor: pointer; }

.app{
  width: var(--popup-w);
  height: var(--popup-h);
  display: flex;
  flex-direction: column;
  background: var(--bg);
}
.content{ flex: 1; min-height: 0; }
.view{ display:none; height:100%; }
.view.active{ display:flex; flex-direction:column; min-height:0; overflow:hidden; }

/* ===== верхние блоки (Market Overview/Favorites/Settings) ===== */
.top-block{ background:var(--bg); border-bottom:var(--border); position:relative; }
.top-head{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px 7px; }

.top-title{
  font-family: 'Oswald', Arial, Helvetica, sans-serif;
  text-transform: uppercase;
  font-size: 20px;
  font-weight: 700;
  letter-spacing: .6px;
  color: var(--text);
  margin: 0;
}

.top-toggle{
  width:28px; height:28px; border-radius:8px; border:0; background:rgba(0,0,0,.06);
  display:grid; place-items:center; color:#2d3a39; transition:background .15s, transform .15s;
}
.top-toggle:hover{ background:rgba(0,0,0,.1); }
.top-toggle .chev{ width:18px; height:18px; transition:transform .2s; }
.top-content{ overflow:hidden; transition:max-height .25s, opacity .2s; max-height:1000px; opacity:1; }
.top-block.collapsed .top-content{ max-height:0; opacity:0; pointer-events:none; }
.top-block.collapsed .top-toggle .chev{ transform:rotate(180deg); }

/* График */
.chart-col{ position:relative; padding:10px 14px 6px; }
.chart-card{
  position:relative;
  background:var(--card);
  border-radius:12px;
  box-shadow:var(--shadow);
  padding:8px 10px 8px var(--dots-left-pad); /* место под точки слева */
}
.chart-wrap{ width:100%; height:var(--chart-height); }
.chart-wrap canvas{ width:100% !important; height:100% !important; display:block; }

/* точки серий — внутри карточки */
.chart-dots{
  position:absolute;
  left:12px; top:12px;
  display:flex; flex-direction:column;
  gap:var(--dots-gap);
  z-index:2;
}
.dot{ width:12px; height:12px; border-radius:50%; border:0; opacity:.9; transition:transform .15s, box-shadow .15s, opacity .15s; box-shadow:0 0 0 0 rgba(0,0,0,0); }
.dot-usdt{ background:#2ecc71; } .dot-usdc{ background:#1e90ff; } .dot-usde{ background:#f1c40f; }
.dot:hover,.dot:focus-visible{ transform:scale(1.25); box-shadow:0 0 0 3px rgba(0,0,0,.08); outline:none; }
.dot.active{ transform:scale(1.15); box-shadow:0 0 0 2px rgba(0,0,0,.12); }

/* ===== категории ===== */
.pill[data-category="USDT"]{ --accent:var(--usdt); }
.pill[data-category="USDC"]{ --accent:var(--usdc); }
.pill[data-category="USDE"]{ --accent:var(--usde); }

.categories.style-glass{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 12px;
  padding: 10px 14px;
  margin: 0;
}
.divider{ height:1px; background: rgba(0,0,0,.08); margin: 0 14px; }

.categories.style-glass .pill{
  width: 100%;
  text-align: center;
  font-family: 'Manrope', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight: 800;
  letter-spacing: .2px;
  position: relative;
  padding: 10px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.35);
  background: rgba(255,255,255,.22);
  color:#103d37;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  transition: transform .15s ease, background .15s ease, color .15s ease,
              box-shadow .15s ease, border-color .15s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,.06);
}
.categories.style-glass .pill:hover{
  transform: translateY(-1px);
  box-shadow: 0 8px 18px rgba(0,0,0,.12), 0 0 0 2px color-mix(in srgb, var(--accent) 20%, transparent);
}
.categories.style-glass .pill:active{ transform: scale(0.98); }
.categories.style-glass .pill:focus-visible{ outline: none; box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 28%, transparent); }
.categories.style-glass .pill.active{
  background: rgba(255,255,255,.48);
  border-color: rgba(255,255,255,.55);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 8px 22px rgba(0,0,0,.12), 0 0 0 2px color-mix(in srgb, var(--accent) 22%, transparent);
  color:#0b2320;
}

/* ===== лента ===== */
.news-feed{ flex:1; min-height:0; overflow:auto; padding:0 12px calc(var(--bn-h) + 12px); scroll-behavior:smooth; }
.news-feed::-webkit-scrollbar{ width:8px; }
.news-feed::-webkit-scrollbar-thumb{ background:rgba(0,0,0,.18); border-radius:4px; }
.news-feed::-webkit-scrollbar-track{ background:transparent; }

.card{
  background:var(--card);
  border-radius:12px;
  margin:12px 4px;
  box-shadow:var(--shadow);
  border:var(--border);
  overflow:hidden;
  transition:transform .18s, box-shadow .18s;
}
.card:hover{ transform:translateY(-.5px); box-shadow:0 10px 22px rgba(0,0,0,.12); }
.card__head{ display:flex; align-items:flex-start; gap:10px; padding:14px 16px 8px; }
.card__title{
  flex:1; font-size:15.5px; font-weight:900; line-height:1.25; letter-spacing:.1px; margin:0;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.card__star{ flex:none; border:0; background:transparent; font-size:18px; color:#f4c542; padding:0 2px; }

.card__media{
  display:block; width:100%; height:auto;
  aspect-ratio:16/9; object-fit:cover; object-position:center;
  background:#eef2f1; border-top:var(--border); border-bottom:var(--border);
}
.card__body{ padding:10px 16px 12px; color:#2b3f3d; font-size:13.5px; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; }
.card__meta{ display:flex; align-items:center; justify-content:space-between; padding:0 16px 12px; color:var(--muted); font-size:12px; }
.card__open{ background:var(--mint); border:0; color:#fff; font-weight:800; padding:6px 10px; border-radius:8px; }

/* нижняя панель */
.bottom-nav{
  height:var(--bn-h);
  background:var(--mint);
  display:grid; grid-template-columns:repeat(3,1fr);
  align-items:center; padding:0 10px; gap:10px;
  border-top-left-radius:10px; border-top-right-radius:10px;
  position:relative; z-index:1000;
}
.bn-item{ height:44px; border-radius:12px; border:0; background:transparent; transition:background .15s, transform .1s; display:flex; align-items:center; justify-content:center; }
.bn-item.active{ background:rgba(255,255,255,.12); }
.bn-item:active{ transform:translateY(1px); }
.bn-ic{ width:24px; height:24px; display:block; }

/* тёмная тема */
:root.dark{
  --bg:#0f1514; --text:#e9f3f1; --muted:#9bb4b0;
  --card:#131c1b; --mint:#66b7a2; --mint-dark:#4aa18c;
  --border:1px solid rgba(255,255,255,.06);
}
:root.dark .categories.style-glass .pill{ background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.25); color: #d9eeea; box-shadow: 0 2px 8px rgba(0,0,0,.28); }
:root.dark .categories.style-glass .pill:hover{ box-shadow: 0 10px 24px rgba(0,0,0,.35), 0 0 0 2px color-mix(in srgb, var(--accent) 20%, transparent); }
:root.dark .categories.style-glass .pill.active{
  background: rgba(255,255,255,.22);
  border-color: rgba(255,255,255,.32);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.15), 0 10px 24px rgba(0,0,0,.38), 0 0 0 2px color-mix(in srgb, var(--accent) 22%, transparent);
  color:#f3fffd;
}

/* ===== SETTINGS CONTENT ===== */
/* компактный верхний отступ у контента настроек */
.settings{
  padding: 0px var(--page-gutter) 1px;  /* было больше — теперь компактнее */
  flex: 1;
  overflow-y: auto;
}
/* на всякий случай — если .settings идёт сразу после .top-block, ещё уменьшаем верхний паддинг */
.top-block + .settings{ padding-top: 6px; }

.setting-row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 0;
  border-bottom: 1px solid rgba(0,0,0,.05);
  font-size: 15px;
  font-weight: 600;
}
.setting-row:last-child{ border-bottom: none; }

/* Language switcher */
.segmented{ display:flex; background: rgba(0,0,0,.06); border-radius: 10px; padding: 2px; gap: 2px; }
.seg{ padding: 8px 12px; border: 0; background: transparent; border-radius: 8px; font-size: 13px; font-weight: 700; color: var(--muted); transition: all .15s; cursor: pointer; }
.seg.active{ background: var(--mint); color: white; box-shadow: 0 2px 6px rgba(0,0,0,.15); }
.seg:hover:not(.active){ background: rgba(0,0,0,.08); color: var(--text); }

/* Dark mode switch */
.switch{ position: relative; display: inline-block; width: 52px; height: 28px; }
.switch input{ opacity: 0; width: 0; height: 0; }
.slider{ position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,.12); transition: .15s; border-radius: 28px; }
.slider:before{ position: absolute; content: ""; height: 22px; width: 22px; left: 3px; bottom: 3px; background-color: white; transition: .15s; border-radius: 50%; box-shadow: 0 2px 6px rgba(0,0,0,.2); }
input:checked + .slider{ background-color: var(--mint); }
input:checked + .slider:before{ transform: translateX(24px); }

/* Button */
.btn{ background: var(--mint); color: white; border: 0; padding: 12px 20px; border-radius: 10px; font-weight: 700; font-size: 14px; cursor: pointer; transition: background .15s; }
.btn:hover{ background: var(--mint-dark); }

/* FAVORITES header tweaks */
#favorites .top-block{ background:var(--bg); border-bottom:none; }
#favorites .top-head{ padding:8px 10px 0; }

/* Search */
.search-row{ padding: 8px 14px 2px; }
.search-inp{ width: 100%; background: var(--card); border: 0; border-radius: 12px; box-shadow: var(--shadow); padding: 10px 12px; font-size: 14px; color: var(--text); outline: none; }
.search-inp::placeholder{ color: var(--muted); }

/* Empty state */
.news-empty{ padding: 40px 20px; text-align: center; color: var(--muted); font-style: italic; }
/* Сжать зазор между "SETTINGS" и блоком настроек */
#settings .top-head { padding: 6px 10px 2px; }      /* меньше нижний паддинг у шапки */
.top-block + .settings { padding-top: 0 !important; }/* убираем верхний паддинг у .settings */
#settings .settings { padding-top: 0; }              /* на случай других правил */

/* (опционально) сами строки настроек ещё компактнее
#settings .setting-row { padding: 12px 0; }
*/
